# Review manager

Сервис для подбора ревьюверов для PR.

## Запуск проекта

Сервер вместе с базой данных:

```bash
docker compose up
```

Или запускать сервер вне Docker
(несмотря на все кэши для Docker, всё ещё немного быстрее):

```bash
docker compose up database --detach
go run ./cmd/manager/
```

В файле `.env.example` лежит пример переменных среды.
Перед запуском достаточно скопировать его в `.env`.

## Тесты

По большому счету не успел сделать.
В `internal/usecase/team/get_test.go` есть пример того, как я делаю unit-тесты.
В `tests/integration_test.go` есть пример простого интеграционного теста.
Интересен только с точки зрения использования `testcontainers`

## Дополнительные инструменты

Git-хуки организованы через [lefthook](https://github.com/evilmartians/lefthook).
Чтобы применить хуки, надо запустить:

```bash
lefthook install
```

Схема API в `openapi.yml`

## Выбор линтеров

Выбор исходит из того, что проект маленький, а над кодом работаю в одиночку.
Поэтому не включаю линтеры, когда уверен,
что не столкнусь с соответствующей проблемой, например, `asciicheck` или `depguard`.
Или когда линтер относится к тем вещам,
которые не используются в проекте: `arangolint`, `protogetter`.

Когда линтеры выполняют схожий функционал, я выбираю лишь один из них.
Так, для оценки сложности функции
я выбрал только `gocognit` и отключил `gocyclo` и `cyclop`,
несмотря на то, что формулы подсчёта у них отличаются.

Начал с того, что взял `golangci-lint linters` и преобразовал список в yaml,
ибо там хорошие пояснения по функционалу.
Среди линтеров с тегом `[fast]` оставлял большинство.
Остальные прореживал более тщательно.
Сверял мнение с готовыми [конфигами типа этого](https://gist.github.com/maratori/47a4d00457a92aa426dbd48a18776322).
Хотел взять его целиком, так же как получу готовый конфиг от команды,
но решил, что его самостоятельное составление - тоже это часть задания.

Настройки оставляю по-умолчанию, если что-то будет раздражать, поменяю по ходу дела.

upd: Из всех правил мешало разве что про обязательную документацию
